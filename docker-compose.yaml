services:
  web:
    image: nginx:latest
    ports:
      - "3080:80"
    volumes:
      - .:/var/www/html
      - ./.docker/nginx/nginx.conf:/etc/nginx/nginx.conf:ro
    labels:
      - traefik.enable=true
      - traefik.http.routers.web.rule=Host(`stock.nolandartois.fr`)
      - traefik.http.routers.web.entrypoints=websecure
      - traefik.http.routers.web.tls.certResolver=letsencrypt
      - traefik.http.services.web.loadbalancer.server.port=3080

  whoami:
    image: traefik/whoami
    ports:
      - "80"
    networks:
      - dokploy-network

networks:
  dokploy-network:
    external: true